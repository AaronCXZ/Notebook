#### 什么是平衡二叉查找树
- 二叉树中任意一个节点的左右子树的高度相差不能大于1
- 平衡二叉查找树中平衡的意思时让整个树左右看起来比较对称、比较平衡，不要出现左子树很高、右子树很矮的情况。这样就能让整棵树的高度相对来说低一些，相对应的插入、删除、查找等操作的效率高一些
- 只要树的高度不比logn大很多，也是一个合格的平衡二叉查找树
#### 如何定义一颗红黑树
- 一种不严格的平衡二叉查找树
- 一颗红黑树需要满足的几个要求：
  - 根节点时黑色的
  - 每个叶子节点都是黑色的空节点，也就是说，叶子节点不存储数据
  - 任何相邻的节点都不能同时为红色，也就是说，红色节点是被黑色节点隔开的
  - 每个节点，从该节点到达其可达叶子节点的所有路径，都包含相同数目的黑色节点
#### 实现红黑树的基本思想
- 遇到什么样的节点排布，我们就对应怎么去调整
- 左旋：围绕某个节点的左旋
- 右旋：围绕某个节点的右旋
#### 插入操作的平衡调整
- 红黑树规定，插入的节点必须是红色的。而且，二叉查找树中新插入的节点都是放在叶子节点上
- 如果插入节点的父节点是黑色的，那我们什么都不用做，它仍然满足红黑树的定义
- 如果插入节点是根节点，那我们直接改变它的颜色，把它变成黑色就可以了
- 调整的过程包含两种基础操作：**左右旋转**和**改变颜色**
- 红黑树的平衡调整过程是一个迭代的过程，我们把正在处理的节点叫做**关注节点**
- 几种调整情况：
  1. 如果关注节点是a，它的叔叔节点d是红色
     1. 将关注节点a的父节点b、叔叔节点d的颜色都设置成黑色
     2. 将关注节点a的祖父节点c的颜色设置成红色
     3. 关注节点变成a的祖父节点c
     4. 跳到CASE 2 或者CASE 3
  2. 如果关注节点是a，它的叔叔节点d是黑色，关注节点a是其父节点b的右子节点
     1. 关注节点变成节点a的父节点b
     2. 围绕新的关注节点b左旋
     3. 跳到CASE 3
  3. 如果关注节点是a，它的叔叔节点d是黑色，关注节点a是其父节点的左子节点
     1. 围绕关注节点a的祖父节点c右旋
     2. 将关注节点a的父节点b、兄弟节点c的颜色互换
     3. 调整结束
#### 删除操作的平衡调整
1. 针对删除节点初步调整：保证整颗红黑树在一个节点删除之后，仍然满足每个节点，从该节点到达其可达叶子节点的所有路径，都包含相同数目的黑色节点
    1. 如果要删除的节点是a，它只有一个子节点b
       1. 删除节点a，并且把节点b替换到a的位置
       2. 节点a只能是黑色，节点b也只能是红色，我们需要把节点b改为黑色
       3. 调整结束，不需要进行二次调整
    2. 如果要删除的节点a有两个非空子节点，并且它的后继子节点就是节点a的右子节点c
       1. 如果节点a的后继节点就是右子节点c，那右子节点c肯定没有左子树。我们把节点a删除，并且将节点c替换到节点a的位置
       2. 然后把节点c的颜色设置为根节点a相同的颜色
       3. 如果节点c是黑色，为了不违反红黑树的最后一条定义，我们给节点c的右子节点d多加一个黑色，这个时候节点d就变成了“红-黑”或者“黑-黑”
       4. 这个时候，关注节点变成了节点b，进行第二步调整
    3. 如果要删除的节点a，它有两个非空子节点，并且节点a的后继节点不是右子节点
       1. 找到后继节点d，并将它删除，删除后继节点d的过程参照CASE 1
       2. 将节点a替换成后继节点d
       3. 把节点d的颜色设置为跟节点a相同的颜色
       4. 如果节点d是黑色，为了步违反红黑树的最后一条定义，我们给d节点的右子节点c多加一个黑色，这时候节点c就变成了“红-黑”或者“黑-黑”
       5. 这个时候，关注节点变成了节点c，进行二次调整
2. 针对关注节点进行二次调整：保证满足不存在相邻的两个红色节点
   1. 如果关注节点是a，它的兄弟节点c是红色的
      1. 围绕关注节点a的父节点b左旋
      2. 关注节点a的父节点b和祖父节点c交换颜色
      3. 关注节点不变
      4. 继续从四种情况中选择合适的规则来调整
   2. 如果关注节点是a，它的兄弟节点c是黑色的，并且节点c的左右子节点d、e都是黑色的
      1. 将关注节点a的兄弟节点c的颜色变成红色
      2. 从关注节点a中去掉一个黑色，这个时候节点a就是单纯的红色或者黑色
      3. 给关注节点a的父节点b添加一个黑色，这个时候节点b就变成了“红-黑”或者“黑-黑”
      4. 关注节点从a变成其父节点b
      5. 继续从四种情况中选择合适的规则来调整
   3. 如果关注节点是a，它的兄弟节点c是黑色，c的左子节点d是红色，c的右子节点e是黑色
      1. 围绕关注节点a的兄弟节点c右旋
      2. 节点c和节点d交换颜色
      3. 关注节点不变
      4. 跳到CASE 4，继续调整
   4. 如果关注节点是a的兄弟节点c是黑色的，并且c的右子节点是红色的
      1. 围绕关注节点a的父节点b左旋
      2. 将关注节点a的兄弟节点c的颜色，跟关注节点a的父节点b设置成相同的颜色
      3. 将关注节点a的父节点b的颜色设置为黑色
      4. 从关注节点a中去掉一个黑色，节点a就变成了单纯的红色或黑色
      5. 将关注节点a的叔叔节点e设置为黑色
      6. 调整结束
