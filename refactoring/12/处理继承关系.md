## 12.1 函数上移（Pull Up Method）

1. 名称

2. 一个简单的速写

```javascript
class Employee {...}
class Salesman extends Employee{
    get name(){...}
}
class Engineer extends Employee{
    get name(){...}
}
```

重构为：

```javascript
class Employee {
    get name(){...}
}
class Salesman extends Employee{}
class Engineer extends Employee{}
```

3. 动机

避免重复代码时很重要的。

4. 做法

- 检查待提升函数，确定它们时完全一致的
- 检查函数体内引用的所有函数调用和字段都能从超类中调用到
- 如果待提升函数的签名不同，使用改变函数声明将那些签名都修改为你想要在超类中使用的签名
- 在超类中新建一个函数，将某一个待提升函数的代码复制到其中
- 执行静态检查
- 移除一个待提升的子类函数
- 测试
- 逐一移除待提升的子类函数，直到只剩下超类中的函数为止

5. 范例

```javascript
class Employee extends Party {
    get annualCost(){
        return this.monthlyCost * 12;
    }
}
class Department extends Party {
    get totalAnnualCost(){
        return this.monthlyCost * 12;
    }
}
```

两个函数都引用了monthltCost属性，首先改变函数声明

```javascript
class Employee extends Party {
    get annualCost(){
        return this.monthlyCost * 12;
    }
}
class Department extends Party {
    get annualCost(){
        return this.monthlyCost * 12;
    }
}
```

然后将其中一个子类的函数复制到超类中

```javascript
class Party {
    get annualCost(){
        return this.monthlyCost * 12;
    }    
}
```



















































